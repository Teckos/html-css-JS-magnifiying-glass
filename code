<!--By Teck0s
This is my very first html/CSS/JS Project // Updated and cleaned
Hope you like it!

I still have to make it responsive and work on mobile device.
Due to the size of the images, they might take some time to display.
Also need to find a way to make the zoom ratio disapear after a little while.-->
<!DOCTYPE html>
<html>
	<head>
		<title>Page Title</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	</head>
	<body>
         <button id="left"> <
        </button>

        <div id = 'bloc1'>
                <h1>Réalisez votre projet avec Apside //
                </h1>
                <p>
                       Nos projets, lieux d’échange pour nos collaborateurs et terrain d’innovation pour nos clients, se déploient à travers des expertises multi sectorielles : transformation digitale, expertise technologique, ingénierie SI, ingénierie industrielle, infrastructure et formation informatique. Le maillage de nos agences représente la force d’un groupe et la proximité d’une PME, renforçant ainsi nos relations avec nos clients. Il permet d’adapter et de moduler nos modes d’engagements. De l’idéation au maintien opérationnel en passant par le développement informatique et industriel, nous accompagnons nos clients à chaque étape du projet. 
                       Nos méthodes itératives garantissent une optimisation des coûts de conception et de développement. 
                       Et si nous construisions ensemble votre prochain projet ?
                </p>
                
                <h1> QUE FAISONS-NOUS ?
                </h1>
                <p>
                        Entreprise de Services du Numérique (ESN), Apside offre un accompagnement complet à ses clients, de la stratégie à la mise en œuvre des projets informatiques et industriels, jusqu’à l’expertise et la formation.
                        Avec plus de 300 clients actifs, Apside est une ESN qui possède une réelle expertise dans les métiers de la Banque, de l’Assurance, des Mutuelles/Retraites, des Télécoms, du Multimédia, du Retail, de la Défense, de l’Aéronautique, du Spatial, de l’Automobile et du Transport. 
                        Le groupe Apside intervient en proximité de ses clients et apporte des solutions personnalisées, grâce à un maillage complet d’agences en France et à l’international.
                        Modulables et évolutives, les offres Apside se déclinent selon différents modèles caractéristiques des ESN : soit à engagement de ressources (assistance technique, centre de compétences), soit à engagement de résultats (forfait, centre de services, TMA, TRA).
                        Nos consultants mettent ainsi en œuvre leurs savoir-faire, leurs connaissances métiers et leurs compétences en organisation.
                        Découvrez nos activités et nos offres, et construisons votre projet ensemble.
                
                <h1> DYNAMIQUE D’UN QUOTIDIEN SINGULIER
                </h1>
                <p>  La Vie Apsidienne, ou la promesse d’un épanouissement professionnel que nous faisons à nos collaborateurs. 
                    La Vie Apsidienne, c’est présenter des projets à Devoxx, ou faire voler sa propre fusée ! 
                    La Vie Apsidienne c’est être speaker lors d’un TechDèj, avoir la fève à la galette (ou pas) ou tenter d’être l’Apsidien of the Year. La Vie Apsidienne c’est faire des “vis-ma-vie” ou encore enseigner et apprendre, grâce à l’Academy ! Devenez professeur, collaborateur, présentateur, inventeur, ou encore pilote de Kart. Devenez l’Apsidien que vous souhaitez être.
                </p>
        </div>

        <canvas id = 'canvas1' width='450' height='300'>
             Your browser does not support the HTML5 canvas tag.
        </canvas>
        
        <div id = 'bloc2' top= '200px' left= '200px'>
                 <h1>Réalisez votre projet avec Apside //
                </h1>
                <p>
                       Nos projets, lieux d’échange pour nos collaborateurs et terrain d’innovation pour nos clients, se déploient à travers des expertises multi sectorielles : transformation digitale, expertise technologique, ingénierie SI, ingénierie industrielle, infrastructure et formation informatique. Le maillage de nos agences représente la force d’un groupe et la proximité d’une PME, renforçant ainsi nos relations avec nos clients. Il permet d’adapter et de moduler nos modes d’engagements. De l’idéation au maintien opérationnel en passant par le développement informatique et industriel, nous accompagnons nos clients à chaque étape du projet. 
                       Nos méthodes itératives garantissent une optimisation des coûts de conception et de développement. 
                       Et si nous construisions ensemble votre prochain projet ?
                </p>
                
                <h1> QUE FAISONS-NOUS ?
                </h1>
                <p>
                        Entreprise de Services du Numérique (ESN), Apside offre un accompagnement complet à ses clients, de la stratégie à la mise en œuvre des projets informatiques et industriels, jusqu’à l’expertise et la formation.
                        Avec plus de 300 clients actifs, Apside est une ESN qui possède une réelle expertise dans les métiers de la Banque, de l’Assurance, des Mutuelles/Retraites, des Télécoms, du Multimédia, du Retail, de la Défense, de l’Aéronautique, du Spatial, de l’Automobile et du Transport. 
                        Le groupe Apside intervient en proximité de ses clients et apporte des solutions personnalisées, grâce à un maillage complet d’agences en France et à l’international.
                        Modulables et évolutives, les offres Apside se déclinent selon différents modèles caractéristiques des ESN : soit à engagement de ressources (assistance technique, centre de compétences), soit à engagement de résultats (forfait, centre de services, TMA, TRA).
                        Nos consultants mettent ainsi en œuvre leurs savoir-faire, leurs connaissances métiers et leurs compétences en organisation.
                        Découvrez nos activités et nos offres, et construisons votre projet ensemble.
                
                <h1> DYNAMIQUE D’UN QUOTIDIEN SINGULIER
                </h1>
                <p>  La Vie Apsidienne, ou la promesse d’un épanouissement professionnel que nous faisons à nos collaborateurs. 
                    La Vie Apsidienne, c’est présenter des projets à Devoxx, ou faire voler sa propre fusée ! 
                    La Vie Apsidienne c’est être speaker lors d’un TechDèj, avoir la fève à la galette (ou pas) ou tenter d’être l’Apsidien of the Year. La Vie Apsidienne c’est faire des “vis-ma-vie” ou encore enseigner et apprendre, grâce à l’Academy ! Devenez professeur, collaborateur, présentateur, inventeur, ou encore pilote de Kart. Devenez l’Apsidien que vous souhaitez être.
                </p>
        </div>
        
       
        <button id="right"> >
        </button>

	</body>
</html>
<style>
    body {   
}

p { padding-left: 10px;
    padding-right: 10px;
}    

h1 {padding-left: 10px;
    padding-right: 10px;
    //color: rgb(231, 151, 59);
}

#bloc1 {
    margin: 0px;
    padding: 0px;
    border: 2px solid rgb(231, 151, 59);
    border-radius: 2px;
    position: fixed;
    width: 300px;
    height: 200px;
    top: 100px;
    left: 100px;
    
    background-color: rgba(15, 35, 52, 1);
    background-size: cover;
    color: rgba(255,255,255,1);
    font-family:Arial, Helvetica, sans-serif;
    font-size: 5px;
}

#bloc2 {
    z-index: 6;
    margin: 0px;
    padding: 0px;
    border: 2px solid rgb(231, 151, 59, 0.7);
    border-radius: 2px;
    position: fixed;
    width: 300px;
    height: 200px;
    background-color: rgba(15, 35, 52, 0.7);
    background-size: cover;
    color: white;
    font-family:Arial, Helvetica, sans-serif;
    font-size: 5px; 
 
    transform: scale(var(--ratio),var(--ratio));
    transform-origin: center;
    -webkit-transform: scale(var(--ratio),var(--ratio));
    
    top: var(--Ypos);
    left: var(--Xpos);
    opacity: 0;

    clip-Path: circle(var(--clipscale) at var(--X) var(--Y));    
        
}


/*Buttons styling*/
button {
    z-index: 8;
    border: none;
    background-color: rgba(255, 255, 255, 0);
    position: fixed;
    color: rgb(231, 151, 59);
    font-weight: bolder;
    font-size: 40px;
    opacity: 0.8;
    animation-name: breathe;
    animation-duration: 5s;
    animation-iteration-count: infinite;
}

@keyframes breathe {
    0% {transform: scale(0.5, 3);
        opacity: 0.1;
    }
    45% {transform: scale(0.5, 7);
        opacity: 0.6;
    }
    100% {transform: scale(0.5, 3);
        opacity: 0.1;
    }
}

#left {
    left: 70px;
    top: 180px;
}
#left:hover {
    animation-play-state: paused;
}

#right {
    left: 398px;
    top: 180px;
}
#right:hover {
    animation-play-state: paused;
}

/*Canvas zoom ratio display*/
#canvas1 {
    z-index: 7;
    padding: 0px;
    margin: 0px;
    border: 0px solid green;
    position: fixed;
    width: 500px;
    height: 400px;
    top: 0px;
    left: 0px;


}
</style>

<script>
    let mouseX = 0;
let mouseY = 0;
let _mouseX = 0;
let _mouseY = 0;
let _mX = 0;
let _mY = 0;
let text_off = 1;
var ratio = 2;
var fontsize = 0;
var url = ['',
        'https://www.apside.com/wp-content/uploads/2022/09/2-industrie_5.0-digital.jpg',
        'https://www.nasa.gov/sites/default/files/thumbnails/image/c92-2.jpg',
        'https://scitechdaily.com/images/Globular-Cluster-Terzan-9.jpg',
        'https://www.nasa.gov/sites/default/files/thumbnails/image/main_image_star-forming_region_carina_nircam_final-5mb.jpg'
    ]
let btg_l = document.getElementById('left');
let btg_r = document.getElementById('right');
var url_bg = 0;
var alpha = 0.6;

window.onload = function () {
    var canvasx = document.getElementById('canvas1');
    var context = canvasx.getContext("2d");
    var bloc2 = document.getElementById('bloc2');
    var bloc1 = document.getElementById('bloc1');
    document.addEventListener("mousemove", getMousePosition);
    document.addEventListener("touchmove", getMousePosition);
    alert('-Left & Right arrows to change the background.\n-Middle click to hide/show the text.\n-Wheel up/down : zoom in/out.');
    //Detects touch device
    const isTouchDevice = () => {
        try {
            document.createEvent("TouchEvent");
            return true;
            } 
        catch (e) {
            return false;
        }
    }
    
    //Background image caroussel
    left.onmousedown = function() {
        url_bg == 0 ? url_bg = url.length : url_bg -=1;
    }
    right.onmousedown = function() {
        url_bg == url.length ? url_bg = 0 : url_bg +=1;
    }

    //Middle mouse button check & text hiding
    document.addEventListener("mousedown", hide_text);
    function hide_text(e) {
        try {
            let middle_btn = e.buttons;
            (middle_btn == 4) ? text_off *= -1 :text_off *= 1; 
            
            if (text_off == -1) {
                bloc1.style.color = 'rgba(0, 0, 0, 0)';
                bloc2.style.color = 'rgba(0, 0, 0, 0)';


                
            }
            else {
                bloc1.style.color = 'rgba(255, 255, 255, 1)';
                bloc2.style.color = 'rgba(255, 255, 255, 1)';
            }
        }
        catch(e){}
    }

    //Get mouse position and move the scaled layer accordingly
    function getMousePosition(e) {
        try{
            //Get position of mouse or touch
            mouseX = !isTouchDevice() ? e.pageX : e.touches[0].pageX;
            mouseY = !isTouchDevice() ? e.pageY : e.touches[0].pageY;
            var opacity = 0;
            if ((mouseY <= 300) && (mouseY >= 100)) {
                _mouseY = mouseY - 100;
                _mY = 100 - _mouseY * (ratio - 1) + (200 * ratio - 200)/2;
                opacity = 0.9;
            } else if (mouseY > 300){
                _mY = 100 - (ratio - 1) * 200 + (200 * ratio - 200)/2;
                }
            else {
                _mY = 100 + (200 * ratio - 200)/2;
            }
          
            if ((mouseX <= 400) && (mouseX >= 100)) {
                _mouseX = mouseX - 100;
                _mX = 100 - _mouseX * (ratio - 1) + (300 * ratio - 300)/2;
                opacity = 0.9;
            } else if (mouseX > 200) {
                _mx = 100 - (ratio - 1) * 300  + (300 * ratio - 300)/2;
                }
            else {
                _mx = 100  + (300 * ratio - 300)/2;
            }

            if((mouseX < 50)||(mouseX > 454)||(mouseY < 50)||(mouseY > 354)) {
                opacity = 0;
            }

            bloc2.style.setProperty("--Xpos", _mX + "px");
            bloc2.style.setProperty("--Ypos", _mY + "px");
            bloc2.style.setProperty("--X", _mouseX + "px");
            bloc2.style.setProperty("--Y", _mouseY + "px");
            bloc2.style.setProperty("--ratio", ratio);
            bloc2.style.setProperty("--clipscale", 60 / ratio + "%");
            bloc1.style.backgroundImage = "url('" + url[url_bg] + "')";
            bloc2.style.backgroundImage = "url('" + url[url_bg] + "')";
            bloc2.style.opacity = opacity;

            }
        catch(e){
        }
    }
    
    //Gets mouse wheel value and adjust zoom level
    document.addEventListener("wheel", zoom);
    function zoom(e) {
        try{
            let _ratio = ratio;
            (e.deltaY > 0) ? _ratio -= 0.5 : _ratio += 0.5; 
            if ((_ratio <= 30) && (_ratio >= 2)){
            ratio=_ratio;}
            else {}
            draw();
        }
        catch(e) {
        }
    }

    
    function draw() {
                context.clearRect(0, 0, 500, 400);
                //Moving zoom ratio value left when 2 digits
                let offset = ratio >= 10 ? 23 : 0;
                context.font = '25px Arial';
                context.fillStyle = 'rgba(255, 255, 255, ' + alpha + ')';
                context.fillText('x', mouseX - 60 - offset, mouseY + 10);
                context.font = '45px Arial';
                context.fillStyle = "rgba(255, 255, 255, " + alpha + ")";
                context.fillText(Math.floor(ratio), mouseX + 15 - 60 - offset, mouseY + 10);
                context.font = '25px Arial';
                context.fillStyle = "rgba(255, 255, 255, " + alpha + ")";
                context.fillText('.' + (ratio - Math.floor(ratio))*10, mouseX - 20, mouseY + 10);
                window.requestAnimationFrame(draw);
            
    }    
 }
</script>
